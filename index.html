<!doctype html>
<html lang="en">
  <head>
    <meta charset=utf-8>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Are we animated yet?</title>
  </head>
  <body role="document">

    <div class="container">
      <h1>Are we animated yet?</h1>
      <p>This page tracks the progress of implementing the <a
      href="http://w3c.github.io/web-animations/">Web Animations API</a>
      in Firefox. The status here refers to the status in the latest <a
      href="https://nightly.mozilla.org/">Firefox Nightly build</a>.
      In Firefox Developer Edition (aka Aurora) you'll see bits and pieces of
      the API, and in beta and release versions you'll see nothing at all
      unless you set <code>dom.animations-api.core.enabled</code> to true.</p>
      <p><a class="btn btn-primary btn-lg"
        href="https://nightly.mozilla.org/" role="button">Firefox
        Nightly &raquo;</a></p>
    </div>
    <div class="container" id="interfaces"></div>
  </body>
  <script src="js/vendor/react.js"></script>
  <script src="js/vendor/JSXTransformer.js"></script>
  <script src="js/vendor/zepto.min.js"></script>
  <script type="text/jsx">
    var InterfaceBox = React.createClass({
      render: function() {
        var specLink =
          'http://w3c.github.io/web-animations/#'
          + this.props.name.toLowerCase();
        return (
          <div className="interface">
            <span className="interface-name"><a
              href={specLink}>{this.props.name}</a></span>
            {this.props.children}
          </div>
        );
      }
    });

    var Member = React.createClass({
      render: function() {
        var specLink =
          [ 'http://w3c.github.io/web-animations/#dom',
            this.props.interface.toLowerCase(),
            this.props.name.toLowerCase() ].join('-');
        return (
          <div className={'member ' + this.props.status}><a
            href={specLink}>{this.props.name}</a></div>
        );
      }
    });

    $.getJSON('status.json').then(function(objects) {
      var renderMember = function(name, member, interfaceName) {
        return <Member key={name} name={name} interface={interfaceName}
                       status={member.status} />;
      };
      var renderObject = function(object) {
        var members = object.members;
        return <InterfaceBox name={object.name}>
                { Object.keys(members).map(function(name) {
                    return renderMember(name, members[name], object.name);
                  })
                }
               </InterfaceBox>;
      };
      objects.forEach(function(object) {
        React.render(renderObject(object),
                     document.getElementById('interfaces'));
      });
    }).fail(function(xhr, error) {
      $(document.body).append('Failed to load status.json: ' + error);
    });
  </script>
</html>
